{
  "realm": "invenio",
  "enabled": true,
  "displayName": "Invenio",
  "displayNameHtml": "<div class=\"kc-logo-text\"><span>Invenio</span></div>",
  "loginWithEmailAllowed": true,
  "registrationAllowed": true,
  "resetPasswordAllowed": true,
  "rememberMe": true,
  "verifyEmail": false,
  "loginTheme": "invenio",
  "accountTheme": "invenio",
  "adminTheme": "keycloak",
  "emailTheme": "keycloak",
  "internationalizationEnabled": true,
  "supportedLocales": ["en", "de"],
  "defaultLocale": "en",
  "attributes": {
    "logoName": "${env.KC_LOGO_NAME:logo-front-matter.svg}"
  },
  "identityProviders": [
    {
      "alias": "orcid",
      "providerId": "orcid",
      "enabled": true,
      "displayName": "ORCID",
      "config": {
        "clientId": "${env.ORCID_CLIENT_ID}",
        "clientSecret": "${env.ORCID_CLIENT_SECRET}"
      }
    }
  ],
  "requiredActions": [
    {
      "alias": "email-authenticator-setup",
      "name": "Set up Email Authenticator",
      "providerId": "email-authenticator-setup",
      "enabled": true,
      "defaultAction": false,
      "priority": 100
    }
  ],
  "authenticationFlows": [
    {
      "alias": "browser",
      "description": "browser based authentication",
      "providerId": "basic-flow",
      "topLevel": true,
      "builtIn": false,
      "authenticationExecutions": [
        {
          "authenticator": "auth-cookie",
          "requirement": "ALTERNATIVE",
          "priority": 10,
          "userSetupAllowed": false
        },
        {
          "authenticator": "identity-provider-redirector",
          "requirement": "ALTERNATIVE",
          "priority": 25,
          "userSetupAllowed": false
        },
        {
          "flowAlias": "browser-forms",
          "requirement": "ALTERNATIVE",
          "priority": 30,
          "userSetupAllowed": false
        }
      ]
    },
    {
      "alias": "browser-forms",
      "description": "Username, password, otp and other auth forms.",
      "providerId": "basic-flow",
      "topLevel": false,
      "builtIn": false,
      "authenticationExecutions": [
        {
          "authenticator": "auth-username-password-form",
          "requirement": "REQUIRED",
          "priority": 10,
          "userSetupAllowed": false
        },
        {
          "authenticator": "email-conditional-authenticator",
          "requirement": "CONDITIONAL",
          "priority": 20,
          "userSetupAllowed": true,
          "authenticatorConfig": {
            "alias": "email-otp-config",
            "config": {
              "defaultOutcome": "skip",
              "forceOtpRole": "",
              "skipOtpRole": "",
              "forceOtpForHttpHeader": "",
              "noOtpRequiredForHttpHeader": ""
            }
          }
        }
      ]
    }
  ],
  "browserFlow": "browser",
  "clientScopes": [
    {
      "name": "profile",
      "description": "OpenID Connect built-in scope: profile",
      "protocol": "openid-connect",
      "attributes": {
        "include.in.token.scope": "true",
        "display.on.consent.screen": "true",
        "consent.screen.text": "${profileScopeConsentText}"
      },
      "protocolMappers": [
        {
          "name": "orcid",
          "protocol": "openid-connect",
          "protocolMapper": "oidc-usermodel-attribute-mapper",
          "consentRequired": false,
          "config": {
            "userinfo.token.claim": "true",
            "user.attribute": "orcid",
            "id.token.claim": "true",
            "access.token.claim": "true",
            "claim.name": "orcid",
            "jsonType.label": "String"
          }
        }
      ]
    }
  ],
  "clients": [
    {
      "clientId": "invenio-app",
      "enabled": true,
      "publicClient": true,
      "redirectUris": ["${env.INVENIO_URL:http://localhost:3000}/*"],
      "webOrigins": ["${env.INVENIO_URL:http://localhost:3000}"],
      "protocol": "openid-connect"
    }
  ]
}
